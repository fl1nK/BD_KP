/*CREATE DATABASE Policia*/
/*
DROP TABLE ЗлочинецьДопІнф
DROP TABLE Зброя
DROP TABLE Злочинець
DROP TABLE Злочин
*/

CREATE TABLE Злочин
(
   ID int NOT NULL PRIMARY KEY,
   ДатаВчинення DATE NULL,
   ДатаРозкриття DATE NULL,
   Тяжкість nvarchar(20) NULL,
   Місто nvarchar(20) NULL
)
GO

CREATE TABLE Злочинець
(
   ID int NOT NULL PRIMARY KEY,
   Прізвище nvarchar(20) NULL,
   ДатаНародження DATE NULL,
   Вік int NULL,
   ВидУчасті nvarchar(20) NULL,
   IDCrime int NOT NULL
)
GO

CREATE TABLE ЗлочинецьДопІнф
(
   IDoffender  int NOT NULL UNIQUE,
   МісцеПроживання nvarchar(20) NULL,
   Одружений nvarchar(20) NULL,
   Діти nvarchar(20) NULL
)
GO

CREATE TABLE Зброя
(
   IDoffender  int  NOT NULL,
   Марка nvarchar(20) NULL,
   КраїнаВиготовлення nvarchar(20) NULL,
)
GO

---------------------------ЗВЯЗКИ---------------------------------------------

ALTER TABLE Злочинець 
ADD
FOREIGN KEY (IDCrime) REFERENCES Злочин (ID);
GO

ALTER TABLE ЗлочинецьДопІнф 
ADD
FOREIGN KEY (IDoffender) REFERENCES Злочинець (ID);
GO

ALTER TABLE Зброя 
ADD
FOREIGN KEY (IDoffender) REFERENCES Злочинець (ID);
GO

-----------------------ОБМЕЖЕННЯ------------------------------

ALTER TABLE Злочин
ADD
CHECK (Тяжкість IN ('Тяжкий','Середній','Невеликий'))
GO

ALTER TABLE Злочинець
ADD
CHECK (ВидУчасті IN ('Головний','Зам','Полмічник'))
GO

ALTER TABLE ЗлочинецьДопІнф
ADD
CHECK (Одружений IN ('Так','Ні')),
CHECK (Діти IN ('Так','Ні'))
GO


INSERT Злочин
VALUES
(1,'2021/10/11', '2021/11/15', 'Тяжкий','Київ'),
(2,'2021/9/7', '2021/10/15', 'Середній','Коростень'),
(3,'2021/10/9', '2021/10/15', 'Невеликий','Коростень')
GO

INSERT Злочинець
VALUES
(1,'Олегович','1999/10/9', 22,'Головний',1),
(2,'Олегович','1988/10/9', 33,'Полмічник',1),
(3,'Олегович','1989/10/9', 32,'Полмічник',1),
(4,'Олегович','1970/10/9', 51,'Головний',2),
(5,'Олегович','1972/10/9', 49,'Зам',2),
(6,'Олегович','1999/10/9', 22,'Полмічник',2),
(7,'Олегович','1988/10/9', 33,'Головний',3),
(8,'Олегович','1988/10/9', 33,'Зам',3),
(9,'Олегович','1999/10/9', 22,'Полмічник',3)
GO

INSERT ЗлочинецьДопІнф
VALUES
(1,'Київ','Так','Ні'),
(2,'Дніпро','Так','Ні'),
(3,'Лвів','Ні','Так'),
(4,'Київ','Так','Ні'),
(5,'Коростень','Так','Так'),
(6,'Київ','Так','Ні'),
(7,'Львів','Ні','Ні'),
(8,'Київ','Так','Так'),
(9,'Київ','Ні','Ні')
GO

INSERT Зброя
VALUES
(1,'AK','Росія'),
(1,'Глок','Австрія'),
(4,'AK','Росія'),
(4,'Глок','Австрія'),
(5,'AK','Росія'),
(7,'AK','Росія'),
(7,'Глок','Австрія'),
(8,'AK','Росія'),
(8,'Глок','Австрія')
GO

SELECT *
FROM Злочин
SELECT *
FROM Злочинець
SELECT *
FROM ЗлочинецьДопІнф
SELECT *
FROM Зброя


---------------------ЗАПРОСИ------------------------
--B
SELECT MAX(КраїнаВиготовлення)
FROM Зброя

--E
SELECT MAX(Місто)
FROM Злочин

